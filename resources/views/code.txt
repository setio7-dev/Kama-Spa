<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kama Spa - Admin</title>
    <link rel="stylesheet" href="{{ asset('/assets/vendors/feather/feather.css') }}">
    <link rel="stylesheet" href="{{ asset('/assets/vendors/ti-icons/css/themify-icons.css') }}">
    <link rel="stylesheet" href="{{ asset('/assets/vendors/css/vendor.bundle.base.css') }}">
    <link rel="stylesheet" href="{{ asset('/assets/vendors/font-awesome/css/font-awesome.min.css') }}">
    <link rel="stylesheet" href="{{ asset('/assets/vendors/mdi/css/materialdesignicons.min.css') }}">
    <link rel="stylesheet" href="{{ asset('/assets/css/style.css') }}">
    <title>{{ config('app.name', 'Laravel') }}</title>
    <link rel="icon" href="{{ asset('/logo.jpg') }}">
</head>

<body>
    <div class="container-scroller">
        @include('components.navbar')
        <div class="container-fluid page-body-wrapper">
            @include('components.admin.sidebar')
            <div class="main-panel">
                <div class="content-wrapper">
                    <div class="container py-4">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h4 class="fw-bold text-dark">Manajemen User</h4>
                            <button class="btn" style="background-color: rgb(196, 164, 132); color: white;" data-bs-toggle="modal" data-bs-target="#updateUserModal">
                                <i class="mdi mdi-account-edit"></i> Update User
                            </button>
                        </div>
                        <div class="modal fade" id="updateUserModal" tabindex="-1" aria-labelledby="updateUserModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content border-0 shadow-lg rounded-4">
                                    <div class="modal-header" style="background-color: rgb(196, 164, 132); color: white; border-top-left-radius: 1rem; border-top-right-radius: 1rem;">
                                        <h5 class="modal-title fw-bold" id="updateUserModalLabel">
                                            <i class="mdi mdi-account-edit-outline"></i> Update Data User
                                        </h5>
                                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <form action="{{ route('updateUser', '/admin/dashboard') }}" method="POST">
                                        @csrf
                                        @method('PUT')
                                        <div class="modal-body p-4">
                                            <div class="mb-3">
                                                <label for="name" class="form-label fw-semibold text-dark">Nama Lengkap</label>
                                                <input type="text" class="form-control shadow-sm" id="name" name="name" value="{{ old('name', $user->name ?? '') }}" required>
                                            </div>
                                            <div class="mb-3">
                                                <label for="email" class="form-label fw-semibold text-dark">Email</label>
                                                <input type="email" class="form-control shadow-sm" id="email" name="email" value="{{ old('email', $user->email ?? '') }}" required>
                                            </div>
                                            <div class="mb-3">
                                                <label for="password" class="form-label fw-semibold text-dark">Password Baru (Opsional)</label>
                                                <input type="password" class="form-control shadow-sm" id="password" name="password" placeholder="Isi jika ingin mengganti password">
                                            </div>
                                        </div>
                                        <div class="modal-footer border-0 d-flex justify-content-between">
                                            <button type="button" class="btn btn-light shadow-sm" data-bs-dismiss="modal">
                                                <i class="mdi mdi-close"></i> Batal
                                            </button>
                                            <button type="submit" class="btn text-white shadow-sm" style="background-color: rgb(196, 164, 132);">
                                                <i class="mdi mdi-content-save"></i> Simpan Perubahan
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <style>
                        .modal-content {
                            border-radius: 1rem;
                            background-color: #fffaf5;
                        }
                        .form-control:focus {
                            border-color: rgb(196, 164, 132);
                            box-shadow: 0 0 0 0.25rem rgba(196, 164, 132, 0.25);
                        }
                        .btn:hover {
                            opacity: 0.9;
                        }
                    </style>
                </div>
                @include('components.footer')
            </div>                
        </div>
    </div>
</body>
<script src="{{ asset('/assets/vendors/js/vendor.bundle.base.js') }}"></script>
<script src="{{ asset('/assets/vendors/chart.js/chart.umd.js') }}"></script>
<script src="{{ asset('/assets/js/off-canvas.js') }}"></script>
<script src="{{ asset('/assets/js/template.js') }}"></script>
<script src="{{ asset('/assets/js/settings.js') }}"></script>
<script src="{{ asset('/assets/js/todolist.js') }}"></script>
<script src="{{ asset('/assets/js/jquery.cookie.js') }}" type="text/javascript"></script>
<script src="{{ asset('/assets/js/dashboard.js') }}"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
@if (session('message'))
<script>
    (async () => {
        const route = "{{ session('route') }}";
        const message = "{{ session('message') }}";
        const icon = "{{ session('icon') }}";
        Swal.fire({
            title: "Memuat...",
            showConfirmButton: false,
            timer: 2000,
            timerProgressBar: true,
            didOpen: () => {
                Swal.showLoading();
            },
        });
        await new Promise((resolve) => setTimeout(resolve, 2000));
        Swal.fire({
            title: message,
            icon: icon,
            confirmButtonText: "Oke",
            confirmButtonColor: `${icon === "success" ? 'green' : 'red'}`
        });
        await new Promise((resolve) => setTimeout(resolve, 2000));
        window.location.href = route;
    })();
</script>
@endif
<script src="https://cdn.jsdelivr.net/npm/bootstrap-fileinput@5.5.3/js/fileinput.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap-fileinput@5.5.3/css/fileinput.min.css" rel="stylesheet">
<script>
    $(document).on('click', '.file-upload-browse', function() {
      var file = $(this).parents().find('.file-upload-default');
      file.trigger('click');
    });
    $('.file-upload-default').on('change', function() {
      $(this).parent().find('.file-upload-info').val($(this).val().replace(/C:\\fakepath\\/i, ''));
    });
</script>
</html>
